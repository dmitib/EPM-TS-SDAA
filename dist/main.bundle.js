!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";e.r(r);for(var n=function(){function t(t){var r=this;this.drain=null,this.workers=0,this.tasks=[],this.started=!1,this.only_once=function(t){var e=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(e)throw new Error("Callback was already called.");e=!0,r.workers-=1,t.callback&&t.callback.apply(t,n),r.drain&&r.tasks.length+r.workers===0&&r.drain(),r.process()}},this.worker=t}return t.prototype.push=function(t,r,e){var n=this;if(this.started||(this.started=!0),0===t.length)return setTimeout((function(){n.drain&&n.drain()}));t.forEach((function(t){var o={data:t,priority:r,callback:e};n.tasks.splice(n.binarySearch(n.tasks,o)+1,0,o),setTimeout((function(){n.process()}))}))},t.prototype.compareTasks=function(t,r){return t.priority-r.priority},t.prototype.each=function(t,r){t.forEach((function(t,e,n){r(t,e,n)}))},t.prototype.binarySearch=function(t,r){for(var e=-1,n=t.length-1;e<n;){var o=e+(n-e+1>>>1);this.compareTasks(r,t[o])>=0?e=o:n=o-1}return e},t.prototype.process=function(){if(this.workers<this.tasks.length){var t=this.tasks.shift();this.workers++;var r=this.only_once(t);this.worker(t.data,r)}},t}(),o=performance.now(),i=new n((function(t,r){console.log("Run "+t.priority),r()})),a=function(t){var r=Math.round(1e3*Math.random());i.push([{priority:r}],r,(function(){console.log("Finished processing task "+t+" with priority "+r)}))},s=0;s<=1e3;s++)a(s);i.drain=function(){console.log("All items have been processed"),o=performance.now()-o,console.log("Spent time =",Math.floor(o),"ms")}}]);
//# sourceMappingURL=main.bundle.js.map